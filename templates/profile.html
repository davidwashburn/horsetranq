<!doctype html>
<html lang="en" class="no-js bg-primary">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;900&display=swap" rel="stylesheet">
		<link rel="icon" type="image/x-icon" href="/static/img/assets/ico/hors.ico">
		<link rel="stylesheet" href="/static/css/reset.css"> <!-- CSS reset -->
		<link rel="stylesheet" href="/static/css/style.css"> <!-- Resource style -->
		<link rel="stylesheet" href="../static/css/style-slides.css"> <!-- Slide specific style -->
		<link rel="stylesheet" href="/static/css/variables.css"> <!-- Variables style -->
		<link rel="stylesheet" href="/static/css/style-v3.css"> <!-- New v3 style -->
		<script src="/static/js/resources/modernizr.js"></script> <!-- Modernizr -->
		<script src="https://cdn.auth0.com/js/auth0/9.18/auth0.min.js"></script>
		<script src="https://cdn.auth0.com/js/auth0-spa-js/2.0/auth0-spa-js.production.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-database.js"></script>
		<title>Profile - HOrstRnq</title>
	</head>
	<body>
		<div id="loadingScreen" style="position: fixed; left: 0; top: 0; width: 100%; height: 100%; background-color: #ffffff; z-index: 10000;">
			<div id="loading-img-container">
				<img src="/static/img/loading/hors-load-3.gif" alt="Loading..." loading="eager" style="width: 150px; height: auto;" />
			</div>
		</div>	
		<main id="profile" class="main-content">
			{% include 'partials/navigation_menu.html' %}

			<!-- Profile Main Section -->
			<div id="profile" class="main-wrapper">
				<div class="hero-section margin-auto-desktop margin-auto-phone margin-auto-tablet width-lg-desktop width-md-tablet width-xl-phone">
					<div class="flex-row-reverse-desktop flex-column-phone flex-align-center flex-justify-center gap-xxl">
						<div class="flex-column-desktop flex-column-phone flex-justify-center flex-align-items-start width-md-desktop">
							<div class="flex-column-desktop flex-column-phone flex-justify-center flex-align-items-start width-full-desktop">
								<h3 class="margin-md-desktop margin-sm-phone margin-md-tablet font-size-md font-weight-xl color-accent-white">PERSONAL STATS</h3>
								
								<!-- Horses popped -->
								<div class="stat-item flex-row-desktop flex-row-phone flex-justify-space-between flex-align-items-center margin-sm-desktop margin-sm-phone margin-sm-tablet">
									<h4 class="font-size-sm font-weight-xl color-accent-white">Horses popped</h4>
									<p class="font-size-sm font-weight-md color-accent-white">1,396</p>
								</div>

								<!-- Time spent in game -->
								<div class="stat-item flex-row-desktop flex-row-phone flex-justify-space-between flex-align-items-center margin-sm-desktop margin-sm-phone margin-sm-tablet">
									<h4 class="font-size-sm font-weight-xl color-accent-white">Time spent in gaem</h4>
									<p class="font-size-sm font-weight-md color-accent-white">843 seconds</p>
								</div>

								<!-- Overall rank -->
								<div class="stat-item flex-row-desktop flex-row-phone flex-justify-space-between flex-align-items-center margin-sm-desktop margin-sm-phone margin-sm-tablet">
									<h4 class="font-size-sm font-weight-xl color-accent-white">Ovrall rank</h4>
									<p class="font-size-sm font-weight-md color-accent-white">33rd</p>
								</div>

								<!-- Member since [account created]-->
								<div class="stat-item flex-row-desktop flex-row-phone flex-justify-space-between flex-align-items-center margin-sm-desktop margin-sm-phone margin-sm-tablet">
									<h4 class="font-size-sm font-weight-xl color-accent-white">Membar sinc</h4>
									<p class="font-size-sm font-weight-md color-accent-white">
										{% if account_creation_date %}
											{% set date_parts = account_creation_date.split('T')[0].split('-') %}
											<span>{{ date_parts[1] }}</span>/<span>{{ date_parts[2] }}</span>/<span>{{ date_parts[0] }}</span>
										{% else %}
											02/24/2024
										{% endif %}
									</p>
								</div>
							</div>

							<!-- Action buttons -->
							<div class="flex-row-desktop flex-align-items-center gap-md">
								{% if logged_in %}
									<div class="button shadow-white-md font-weight-xl font-size-lg margin-lg-desktop margin-sm-phone margin-lg-tablet">
										<a href="/horsplay" class="color-accent-gold">CUSTOMIZ</a>
									</div>
									{% if subscription_type == 'free' %}
										<div class="button shadow-white-md font-weight-xl font-size-lg margin-md-desktop margin-sm-phone margin-md-tablet">
											<a href="/store" class="color-accent-gold">UPGRAD PLAN</a>
										</div>
									{% else %}
										<div class="button shadow-white-md font-weight-xl font-size-lg margin-md-desktop margin-sm-phone margin-md-tablet">
											<a href="/store" class="color-accent-gold">MANAG PLAN</a>
										</div>
									{% endif %}
								{% else %}
									<div class="button shadow-white-md font-weight-xl font-size-lg margin-lg-desktop margin-sm-phone margin-lg-tablet">
										<a href="/login" class="color-accent-gold">SIGN IN</a>
									</div>
								{% endif %}
							</div>
						</div>
						<div id="hero-square" class="width-lg-phone width-md-tablet margin-auto-phone margin-auto-tablet border-radius border-radius" style="position: relative;">
							<div class="main-label main-label-top-right bg-accent-gold color-accent-grey-dark">
								{% if logged_in %}
									{%- if username -%}{{ username | upper }}{%- elif name -%}{{ name | upper }}{%- else -%}HORS MEMBAR{%- endif -%}
								{% else %}
									SIGN IN, HOSS
								{% endif %}
							</div>
							{% if subscription_type == 'free' %}
								<div class="main-label main-label-bottom-left bg-accent-grey-mid-alt color-accent-grey-dark">DEFALT</div>
							{% elif subscription_type == 'one' %}
								<div class="main-label main-label-bottom-left bg-success-dark color-accent-white">HORS ONE</div>
							{% elif subscription_type == 'plus' %}
								<div class="main-label main-label-bottom-left bg-accent-gold color-accent-grey-dark">HORS PLUS</div>
							{% elif subscription_type == 'max' %}
								<div class="main-label main-label-bottom-left bg-error-dark color-accent-white">HORS MAX</div>
							{% else %}
								<div class="main-label main-label-bottom-left bg-accent-grey-mid-alt color-accent-grey-dark">DEFALT</div>
							{% endif %}
							<img id="index-hero-img" src="/static/img/branding/horsetranq-v3.png" alt="Horsetranq">
						</div>
					</div>
				</div>
				<div class="main-section margin-auto-desktop margin-auto-phone margin-auto-tablet width-full-desktop width-md-tablet width-xl-phone bg-primary-dark">
					<div class="flex-column-desktop flex-column-phone flex-align-center flex-justify-center width-lg-desktop margin-auto-desktop margin-auto-phone margin-auto-tablet gap-xl">

						<!-- Account Details & Settings Grid -->
						<div class="flex-row-desktop flex-column-phone flex-align-items-start flex-justify-center gap-xl width-full-desktop margin-xl-desktop margin-lg-phone margin-xl-tablet">
							
							<!-- Account Details Column -->
							<div class="flex-column-desktop flex-column-phone flex-justify-center flex-align-items-start width-md-desktop">
								<h3 class="margin-md-desktop margin-sm-phone margin-md-tablet font-size-md font-weight-xl color-accent-white">
									ACOUNT DETALES
								</h3>
								
								<!-- Name -->
								<div class="detail-row flex-row-desktop flex-row-phone width-full-phone flex-justify-space-between flex-align-items-center margin-sm-desktop margin-sm-phone margin-sm-tablet" style="padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 0.5rem; margin-bottom: 1rem; width: 100%;">
									<h4 class="font-size-sm font-weight-xl color-accent-white">Name</h4>
									<p class="font-size-sm font-weight-md color-accent-white">
										{% if name %}
											{{ name }}
										{% else %}
											Guest
										{% endif %}
									</p>
								</div>

								<!-- Email -->
								<div class="detail-row flex-row-desktop flex-row-phone width-full-phone flex-justify-space-between flex-align-items-center margin-sm-desktop margin-sm-phone margin-sm-tablet" style="padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 0.5rem; margin-bottom: 1rem; width: 100%;">
									<h4 class="font-size-sm font-weight-xl color-accent-white">Email</h4>
									<p class="font-size-sm font-weight-md color-accent-white">
										{% if logged_in %}
											{{ email }}
										{% else %}
											Unknown
										{% endif %}
									</p>
								</div>

								<!-- Username -->
								<div class="detail-row flex-row-desktop flex-row-phone width-full-phone flex-justify-space-between flex-align-items-center margin-sm-desktop margin-sm-phone margin-sm-tablet" style="padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 0.5rem; margin-bottom: 1rem; width: 100%;">
									<h4 class="font-size-sm font-weight-xl color-accent-white">Username</h4>
									<div class="username-editable">
										<p class="font-size-sm font-weight-md color-accent-white username-display" id="usernameDisplay">
											{% if username %}
												{{ username }}
											{% else %}
												Not assigned
											{% endif %}
										</p>
										<div class="username-edit-controls" style="display: none;">
											<input type="text" id="usernameInput" class="username-input" value="{{ username }}" maxlength="20">
											<button type="button" id="usernameSaveBtn" class="btn-small">Save</button>
											<button type="button" id="usernameCancelBtn" class="btn-small">Cancel</button>
										</div>
										<button type="button" id="usernameEditBtn" class="btn-small edit-btn">Change</button>
									</div>
								</div>
							</div>

							<!-- Profile Settings Column -->
							<div class="flex-column-desktop flex-column-phone flex-justify-center flex-align-items-start width-md-desktop">
								<h3 class="margin-md-desktop margin-sm-phone margin-md-tablet font-size-md font-weight-xl color-accent-white">
									PROFIL SETINGS
								</h3>
								
								<!-- Avatar Selector -->
								<div class="profile-setting margin-sm-desktop margin-sm-phone margin-sm-tablet" style="padding: 1.5rem; background: rgba(255,255,255,0.05); border-radius: 0.5rem; width: 100%; margin-bottom: 1rem;">
									<h4 class="font-size-sm font-weight-xl color-accent-white margin-sm-desktop margin-sm-phone margin-sm-tablet">Selec profil icon</h4>
									<div id="avatar-selector-wrapper" class="custom-select">
										<div id="avatar-selector" class="optn-select" data-value="{{ avatar_type }}">
											{% if avatar_type == 'google-profile' %}
												<span class="avatar-option-text">Google Profile</span>
												<img src="{{ picture }}" alt="Google Profile" class="avatar-option-image" width="30" height="30">
											{% elif avatar_type == 'default-avatar' %}
												<span class="avatar-option-text">Hors membar</span>
												<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Default_pfp.svg/480px-Default_pfp.svg.png" alt="Default Avatar" class="avatar-option-image" width="30" height="30">
											{% elif avatar_type == 'hors-foundation' %}
												<span class="avatar-option-text">Hors Foundation</span>
												<img src="/static/img/branding/season-1.png" alt="Hors Foundation" class="avatar-option-image" width="30" height="30">
											{% elif avatar_type == 'hors-season-1' %}
												<span class="avatar-option-text">Hors Season 1 Member</span>
												<img src="/static/img/branding/season-1.png" alt="Hors Season 1" class="avatar-option-image" width="30" height="30">
											{% elif avatar_type == 'hors-season-2' %}
												<span class="avatar-option-text">Hors Season 2 Member</span>
												<img src="/static/img/branding/season-2.png" alt="Hors Season 2" class="avatar-option-image" width="30" height="30">
											{% else %}
												<span class="avatar-option-text">Google Profile</span>
												<img src="{{ picture }}" alt="Google Profile" class="avatar-option-image" width="30" height="30">
											{% endif %}
										</div>
										<div class="options">
											<div class="option" data-value="default-avatar">
												<span class="avatar-option-text">Hors membar</span>
												<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Default_pfp.svg/480px-Default_pfp.svg.png" alt="Default Avatar" class="avatar-option-image" width="30" height="30">
											</div>
											<div class="option" data-value="google-profile">
												<span class="avatar-option-text">Googl profil icon</span>
												<img src="{{ picture }}" alt="Google Profile" class="avatar-option-image" width="30" height="30">
											</div>
											<div class="option" data-value="hors-foundation">
												<span class="avatar-option-text">Hors foundar</span>
												<img src="/static/img/branding/season-1.png" alt="Hors Foundation" class="avatar-option-image" width="30" height="30">
											</div>
											<div class="option" data-value="hors-season-1">
												<span class="avatar-option-text">Hors Season 1 Member</span>
												<img src="/static/img/branding/season-1.png" alt="Hors Season 1" class="avatar-option-image" width="30" height="30">
											</div>
											<div class="option" data-value="hors-season-2">
												<span class="avatar-option-text">Hors Season 2 Member</span>
												<img src="/static/img/branding/season-2.png" alt="Hors Season 2" class="avatar-option-image" width="30" height="30">
											</div>
										</div>
									</div>
								</div>

								<!-- Hide Avatar Option -->
								<div class="profile-setting margin-sm-desktop margin-sm-phone margin-sm-tablet" style="padding: 1.5rem; background: rgba(255,255,255,0.05); border-radius: 0.5rem; width: 100%; margin-bottom: 1rem;">
									<div class="flex-row-desktop flex-column-phone flex-justify-space-between flex-align-items-center">
										<h4 class="font-size-sm font-weight-xl color-accent-white">Hide profile icon</h4>
										<div class="hide-avatar-checkbox">
											<label class="checkbox-label">
												<input type="checkbox" id="hideAvatarCheckbox" {% if hide_avatar == 'Yes' %}checked{% endif %}>
												<span class="checkmark"></span>
											</label>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</main>

	<script>
		window.auth0UserId = '{{ user_id }}';
		window.firebaseToken = '{{ firebase_token }}';
	</script>
	<script src="https://uptime.betterstack.com/widgets/announcement.js" data-id="165972" async="async" type="text/javascript"></script>
	<script src="/static/js/resources/jquery-2.1.1.js"></script>
	<script src="/static/js/resources/jquery.mixitup.min.js"></script>
	<script type="module" src="/static/js/main.js"></script>
	<script type="module" src="/static/js/firebase.js"></script>
	<script>
		// Make logged in status available to JavaScript
		window.loggedIn = {{ 'true' if logged_in else 'false' }};
	</script>
	<script src="/static/js/secondary/username-editor.js"></script>
	<script src="/static/js/secondary/account-button.js"></script>
	<script src="/static/js/secondary/hide-avatar.js"></script>
	<script src="/static/js/secondary/avatar-selector.js"></script>
	<script src="/static/js/resources/jquery.min.js"></script>
	<script src="/static/js/resources/jquery-ui.js"></script>
	<script src="/static/js/resources/jquery.ui.touch-punch.min.js"></script>
	</body>
</html>
